(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=o(r);fetch(r.href,l)}})();const H=1,M=["H","D","C","S"],P=[2,3,4,5,6,7,8,9,10,"J","Q","K","A"],E=document.getElementById("dealer-cards"),T=document.getElementById("player-cards"),y=document.getElementById("dealer-score"),C=document.getElementById("player-score"),v=document.getElementById("buttons"),O=document.getElementById("hit"),Y=document.getElementById("stand"),w=new bootstrap.Modal(document.getElementById("staticBackdrop")),$=document.getElementById("modal-header"),S=document.getElementById("modal-body"),k=document.getElementById("modal-button");let d,c=0,m=!1,u=[],i=[];const j=()=>{d=[];for(let e=0;e<H;e++)M.forEach(t=>{P.forEach(o=>{d.push({card:o,suit:t})})})},x=e=>{for(let t=e.length-1;t>0;t--){const o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}return e},p=e=>new Promise(t=>setTimeout(t,e)),D=async()=>{j(),d=x(d);for(let t=0;t<4;t++)g(c,c%2==0,c==3),await p(500);h(u);const{total:e}=f(i,!0);if(e==21){L(3),await p(500),y.innerHTML="<b>Total:</b> 21",s();return}else y.innerHTML="<b>Total:</b> ???";v.setAttribute("class","row"),m=!0},g=(e,t,o)=>{const n=d[e],r=document.createElement("img");r.setAttribute("src",I(n,o)),r.setAttribute("id",e),r.setAttribute("class","playing-card col-5 col-sm-4 col-md-3 col-xl-2"),t?(T.appendChild(r),u.push(n)):(E.appendChild(r),i.push(n)),c++},I=({card:e,suit:t},o)=>o?"/cards/1B.svg":e==10?`/cards/T${t}.svg`:`/cards/${e}${t}.svg`,f=(e,t=!1)=>{let o=0,n=0;if(e.forEach(r=>{typeof r.card=="string"?r.card==="A"?(o++,n++):o+=10:o+=r.card}),t)for(let r=0;r<n;r++){let l=10*(r+1);o+l<=21&&(o+=l)}return{total:o,aceCount:n}},h=(e,t=!0)=>{const{total:o,aceCount:n}=f(e);let r=`${o}`;for(let l=0;l<n;l++){let a=10*(l+1);o+a==21?r=21:o+a<=21&&(r+=` / ${o+a}`)}t?C.innerHTML=`<b>Total:</b> ${r}`:y.innerHTML=`<b>Total:</b> ${r}`},N=async()=>{if(m)m=!1;else return;g(c,!0,!1),h(u);const{total:e}=f(u);if(e>21)return s();m=!0},L=e=>{const t=document.getElementById(e),o=d[e];t.setAttribute("src",I(o,!1))},A=async(e=!0)=>{m=!1,v.setAttribute("class","d-none"),e&&(L(3),h(i,!1)),await p(1e3);const{total:t,aceCount:o}=f(i);if(t==21||t>21||t>17)return s();if(o==0)return t<17?b():s();for(let n=o;o>-1;n--){let r=10*n,l=t+r;if(l==21||l>17&&l<21)return s();if(l<=17)return b();if(n==0&&l>21)return s()}},b=async()=>{g(c,!1,!1),h(i,!1),await A(!1)},s=()=>{const e=f(u,!0),t=f(i,!0);let o="",n="";e.total==t.total?(o="Push",n="Y'all tied"):t.total==21?(o="You lose",n="Dealer Blackjack"):t.total>21?(o="You win",n="Dealer Bust"):e.total==21?(o="You win",n="Player Blackjack"):e.total>21?(o="You lose",n="Player Bust"):e.total>t.total?(o="You win",n="Player total beats Dealer"):t.total>e.total&&(o="You lose",n="Dealer total beats Player"),$.innerText=o,S.innerText=n,w.show()},B=e=>{for(;e.firstChild;)e.removeChild(e.lastChild)},K=async()=>(w.hide(),c=0,u=[],i=[],C.innerHTML="",y.innerHTML="",B(T),B(E),await p(500),D());O.addEventListener("click",N);Y.addEventListener("click",A);k.addEventListener("click",K);D();
